<!DOCTYPE html>
<html>
<head>
  <title>Google API in Salesforce Canvas</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="/canvas/sdk/js/56.0/canvas-all.js"></script> <!-- latest API version -->
  <script src="/canvas/sdk/js/36.0/canvas-all.js"></script>
</head>
<body>
  <h2>Google API Test</h2>
  <div id="output">Loading...</div>
  <script>
    function fetchGoogleData(endpoint) {
      $.ajax({
        url: '/services/apexrest/GoogleAPI/' + endpoint,
        method: 'GET',
        headers: { 'Authorization': 'Bearer ' + Sfdc.canvas.oauth.token },
        success: function(res) {
          $("#output").append("<pre>" + JSON.stringify(res, null, 2) + "</pre>");
        },
        error: function(err) {
          $("#output").append("<p>Error: " + JSON.stringify(err) + "</p>");
        }
      });
    }
    // Example call
    fetchGoogleData('userinfo');
  </script>
</body>
</html>

